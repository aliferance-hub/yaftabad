// بانک اطلاعات هوش مصنوعی برای تشخیص نیازها
const aiKnowledgeBase = {
    tools: {
        'برش چوب': ['تبر', 'اره', 'اره برقی', 'اره زنجیری', 'اره دستی', 'چکش تبری'],
        'برش فلز': ['اره آهن بر', 'فرز', 'پلاسما', 'اکسی استیلن'],
        'سوراخ کردن': ['دریل', 'مته', 'چکش تخریب'],
        'رنگ کاری': ['قلم مو', 'رولر', 'اسپری'],
        'باغبانی': ['قیچی باغبانی', 'بیل', 'شلنگ آب', 'آبپاش'],
        'تعمیر خودرو': ['آچار', 'پیچ گوشتی', 'جک خودرو', 'کمپرسور'],
        'آشپزی': ['چاقو', 'تابه', 'قابلمه', 'میکسر', 'بلندر'],
        'تمیز کاری': ['جاروبرقی', 'دستمال', 'مواد شوینده']
    },
    contexts: {
        'خانه': ['آشپزخانه', 'حمام', 'اتاق خواب', 'پذیرایی'],
        'کار': ['دفتر', 'کارگاه', 'فروشگاه'],
        'تفریح': ['ورزش', 'سفر', 'بازی'],
        'تحصیل': ['مدرسه', 'دانشگاه', 'مطالعه']
    },
    budgets: {
        'ارزان': 'زیر 500 هزار تومان',
        'متوسط': '500 هزار تا 2 میلیون تومان',
        'گران': 'بالای 2 میلیون تومان'
    }
};

// بانک اطلاعات برای پیشنهادات هوشمند
const smartSuggestions = {
    keywords: {
        'گوشی': ['موبایل', 'تلفن همراه', 'اسمارت فون'],
        'لپ تاپ': ['نوت بوک', 'کامپیوتر قابل حمل'],
        'هدفون': ['ایرپاد', 'هندزفری', 'هدست'],
        'ساعت': ['ساعت هوشمند', 'اسمارت واچ'],
        'تبلت': ['آیپد', 'تبلت'],
        'کامپیوتر': ['PC', 'دسکتاپ'],
        'تلویزیون': ['TV', 'تی وی', 'ال ای دی'],
        'یخچال': ['فریزر', 'ساید بای ساید'],
        'ماشین لباسشویی': ['لباسشویی', 'واشر']
    },
    brands: {
        'گوشی': ['سامسونگ', 'اپل', 'شیائومی', 'هوآوی', 'نوکیا', 'وان پلاس'],
        'لپ تاپ': ['ایسوس', 'اچ پی', 'لنوو', 'دل', 'ایسر', 'مک بوک'],
        'هدفون': ['سونی', 'بوز', 'JBL', 'ایرپاد', 'سامسونگ'],
        'ساعت': ['اپل واچ', 'سامسونگ', 'شیائومی', 'هوآوی'],
        'تبلت': ['آیپد', 'سامسونگ', 'لنوو', 'هوآوی'],
        'تلویزیون': ['سامسونگ', 'ال جی', 'سونی', 'TCL', 'هایسنس']
    },
    filters: {
        'قیمت': ['ارزان', 'گران', 'زیر 5 میلیون', 'زیر 10 میلیون', 'زیر 20 میلیون', 'بالای 20 میلیون'],
        'کیفیت': ['باکیفیت', 'اورجینال', 'اصل', 'تقلبی نباشه'],
        'ویژگی': ['گیمینگ', 'عکاسی', 'باتری قوی', 'ضد آب', 'بی سیم', '5G', '4G']
    }
};

// نمونه داده‌های محصولات برای تست
const sampleProducts = [
    {
        title: "گوشی سامسونگ Galaxy A54",
        price: "12,500,000 تومان",
        source: "دیجی‌کالا",
        image: "📱",
        link: "#"
    },
    {
        title: "گوشی سامسونگ Galaxy A34",
        price: "9,800,000 تومان",
        source: "بامیلو",
        image: "📱",
        link: "#"
    },
    {
        title: "گوشی سامسونگ Galaxy M54",
        price: "11,200,000 تومان",
        source: "ترب",
        image: "📱",
        link: "#"
    },
    {
        title: "لپ تاپ ایسوس VivoBook",
        price: "18,500,000 تومان",
        source: "دیجی‌کالا",
        image: "💻",
        link: "#"
    },
    {
        title: "هدفون سونی WH-1000XM4",
        price: "8,200,000 تومان",
        source: "بامیلو",
        image: "🎧",
        link: "#"
    },
    {
        title: "تبر چوب بری حرفه‌ای",
        price: "450,000 تومان",
        source: "ابزار یار",
        image: "🪓",
        link: "#"
    }
];

// متغیرهای سراسری
let conversationHistory = [];
let currentUser = null;
let userSearchHistory = [];